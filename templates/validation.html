<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Dashboard</title>
		<link rel="stylesheet" href="dashboard.css" />
		<style>
			body {
				font-family: "Arial", sans-serif;
				margin: 0;
				padding: 0;
				background-color: #f5f5f5;
			}

			header {
				background-color: #333;
				color: #fff;
				padding: 15px;
				text-align: center;
				position: fixed;
				width: 100%;
				z-index: 1000;
			}

			header h3 {
				margin: 0;
				font-size: 1.5em;
			}

			header span {
				color: #ff8c00;
			}

			/* Add some styling for the content section */
			.content {
				margin-top: 60px;
				padding: 20px;
			}

			.container {
				background-color: #fff;
				padding: 20px;
				border-radius: 5px;
				box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
			}

			form {
				max-width: 600px;
				margin: auto;
			}

			fieldset {
				margin-bottom: 20px;
			}

			input,
			textarea {
				width: 100%;
				padding: 10px;
				margin-top: 8px;
				margin-bottom: 15px;
				display: inline-block;
				border: 1px solid #ccc;
				box-sizing: border-box;
				border-radius: 4px;
			}

			button {
				background-color: #4caf50;
				color: white;
				padding: 14px 20px;
				margin: 8px 0;
				border: none;
				border-radius: 4px;
				cursor: pointer;
				font-size: 16px;
			}

			button:hover {
				background-color: #45a049;
			}

			.modal {
				display: none;
				position: fixed;
				z-index: 1;
				left: 0;
				top: 0;
				width: 100%;
				height: 100%;
				overflow: auto;
				background-color: rgba(0, 0, 0, 0.4);
			}

			.modal-content {
				background-color: #fefefe;
				margin: 15% auto;
				padding: 20px;
				border: 1px solid #888;
				width: 80%;
			}

			.close {
				color: #aaa;
				float: right;
				font-size: 28px;
				font-weight: bold;
			}

			.close:hover,
			.close:focus {
				color: black;
				text-decoration: none;
				cursor: pointer;
			}
		</style>
	</head>

	<body>
		<input type="checkbox" id="check" />
		<!-- Header area start -->
		<header>
			<label for="check">
				<i class="fas fa-bars" id="sidebar_btn"></i>
			</label>
			<div class="left_area">
				<h3>Template<span>Again</span></h3>
			</div>
			<div class="right_area">
				<a href="#" class="logout_btn">Logout</a>
			</div>
		</header>
		<div class="mobile_nav">
			<div class="mobile_nav_items">
				<a href="./dashboard.html"
					><i class="fas fa-desktop"></i><span>Home</span></a
				>
				<a href="#"><i class="fas fa-cogs"></i><span>Validation</span></a>
				<a href="#"><i class="fas fa-table"></i><span>Location finder</span></a>
			</div>
		</div>
		<div class="sidebar">
			<a href="./dashboard.html"
				><i class="fas fa-desktop"></i><span>Home</span></a
			>
			<a href="#"><i class="fas fa-cogs"></i><span>Validation</span></a>
			<a href="#"><i class="fas fa-table"></i><span>Location finder</span></a>
		</div>
		<div class="content">
			<div class="container">
				<form id="contact" action="" method="post">
					<h3>Validate your business Idea</h3>
					<fieldset>
						<input
							placeholder="Industry"
							type="text"
							name="industry"
							tabindex="1"
							required
							autofocus
						/>
					</fieldset>
					<fieldset>
						<textarea
							placeholder="Provide a description of your business"
							name="description"
							tabindex="5"
							required
						></textarea>
					</fieldset>
					<fieldset>
						<button
							name="submit"
							type="submit"
							id="contact-submit"
							data-submit="...Sending"
						>
							Submit
						</button>
					</fieldset>
				</form>
			</div>
		</div>
		<div id="myModal" class="modal">
			<div class="modal-content">
				<span class="close">&times;</span>
				<p id="apiResult">Loading...</p>
			</div>
		</div>
		<script>
			document
				.getElementById("contact")
				.addEventListener("submit", function (event) {
					event.preventDefault();

					var industryField = document.getElementsByName("industry")[0];
					var descriptionField = document.getElementsByName("description")[0];

					var industry = industryField.value;
					var description = descriptionField.value;

					// Clear the input fields
					industryField.value = "";
					descriptionField.value = "";

					// Show the modal
					var modal = document.getElementById("myModal");
					modal.style.display = "block";

					// When the user clicks on <span> (x), close the modal
					document.getElementsByClassName("close")[0].onclick = function () {
						modal.style.display = "none";
					};

					var formdata = new FormData();
					formdata.append("type_", industry);
					formdata.append(
						"description",
						description
					);
					var requestOptions = {
						method: "POST",
						headers: { "Content-Type": "application/json" },
						body: formdata,
                        redirect: "follow",
					};


					// Fetch the API result
					fetch("http://127.0.0.1:5000/validator", requestOptions)
						.then((response) => response.text())
						.then((result) => {
							// Display the result in the modal
							document.getElementById("apiResult").textContent = result;
						})
						.catch((error) => console.log("error", error));
				});
		</script>
	</body>
</html>
